var q=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var L=(o,e,t)=>e in o?q(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,f=(o,e)=>{for(var t in e||(e={}))R.call(e,t)&&L(o,t,e[t]);if(A)for(var t of A(e))W.call(e,t)&&L(o,t,e[t]);return o},C=(o,e)=>J(o,K(e));import{a as b,c as Y,u as Q,d as $,b as I,r as m,w,o as E,e as k,f as _,g as p,h as S,i as X,T as Z,j as s,k as B,l as x,v as ee,F as j,m as H,t as y,p as U,n as G,q as oe,s as D,x as te}from"./vendor.8697cd73.js";const se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}};se();const le={};var z;(function(o){o.editConfig="editConfig"})(z||(z={}));const ne={[z.editConfig](o,e){o.food=f(f({},e==null?void 0:e.food),o.food),o.lave=f(f({},e==null?void 0:e.lave),o.lave)}},ce={lave:{},food:{}};var F;(function(o){o.setConfig="setConfig"})(F||(F={}));const ae={[F.setConfig]:async({state:o},e)=>{var t,n,l,c,a,u;if(e=Object.fromEntries(Object.entries(e).map(([h,i])=>[h,Object.fromEntries(Object.entries(i).map(([r,d])=>[r,d===null?void 0:d]))])),((t=e.food)==null?void 0:t.schoolName)!==((n=o.food)==null?void 0:n.schoolName)&&((l=e.food)==null?void 0:l.schoolName)||((c=e.food)==null?void 0:c.schoolId)!==((a=o.food)==null?void 0:a.schoolId)&&((u=e.food)==null?void 0:u.schoolId)){const{data:h}=await b({url:`https://fatraceschool.k12ea.gov.tw/school?SchoolName=${e.food.schoolName}`,method:"GET"});let{data:i}=h;e||(e={food:{},lave:{}}),console.log(i),i.length&&(e.$_updata=!0,e.food.schoolId=i[0].SchoolId.toString(),e.food.schoolName=i[0].SchoolName)}e.$_updata!==!1&&((chrome==null?void 0:chrome.storage)?chrome.storage.local.set({config:e}):localStorage.setItem("config",JSON.stringify(e))),o.food=f(f({},o.food),e.food),o.lave=f(f({},o.lave),e.lave)}},ie={namespaced:!0,mutations:ne,getters:le,state:ce,actions:ae};var M;(function(o){o.CONFIG="config"})(M||(M={}));const ue=Y({modules:{[M.CONFIG]:ie}}),P=Symbol("vue-store"),N=()=>Q(P);var O=(o,e)=>{const t=o.__vccOpts||o;for(const[n,l]of e)t[n]=l;return t};const T=o=>(U("data-v-35beb1d5"),o=o(),G(),o),de={key:0,class:"menu"},re={class:"content"},fe={class:"cover"},he=["src"],_e={class:"flex flex-down flex-item-center"},pe=["textContent"],ve=["textContent"],me={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#fff"},ge=T(()=>s("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"},null,-1)),Ce=T(()=>s("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5l2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4l1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"},null,-1)),we=[ge,Ce],xe={key:1,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#fff"},ye=T(()=>s("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),$e=T(()=>s("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"},null,-1)),Ie=[ye,$e],Se=$({setup(o){const e=N(),t=I(()=>e.state.config.food.schoolId),n=I(()=>e.state.config.food.open),l=m(),c=m(!1);w(t,()=>a()),w(n,()=>c.value=!!n.value),E(()=>{w(c,()=>{e.dispatch("config/setConfig",{food:{open:c.value}})})}),k(()=>clearInterval(u));const a=async()=>{var d;let h=new Date;const{data:i}=await b({url:`https://fatraceschool.k12ea.gov.tw/offered/meal?SchoolId=${t.value}&period=${[h.getFullYear(),h.getMonth()+1,h.getDate()].join("-")}&KitchenId=all`,method:"GET"});let r=(d=i==null?void 0:i.data)==null?void 0:d[0];if(r){const{data:v}=await b({url:`https://fatraceschool.k12ea.gov.tw/dish?BatchDataId=${r.BatchDataId}`,method:"GET"});l.value=v==null?void 0:v.data}},u=setInterval(a,1e3*60*10);return a(),(h,i)=>l.value?(_(),p("div",de,[S(Z,{name:"content"},{default:X(()=>[x(s("div",re,[(_(!0),p(j,null,H(l.value,(r,d)=>(_(),p("div",{class:"dish",key:d},[s("div",fe,[s("img",{src:`https://fatraceschool.k12ea.gov.tw/dish/pic/${r.DishId}`,alt:"\u83DC\u8272\u5716\u7247"},null,8,he)]),s("div",_e,[s("span",{textContent:y(r.DishType)},null,8,pe),s("span",{textContent:y(r.DishName)},null,8,ve)])]))),128))],512),[[ee,c.value]])]),_:1}),s("div",{class:"type",onClick:i[0]||(i[0]=r=>c.value=!c.value)},[c.value?(_(),p("svg",me,we)):(_(),p("svg",xe,Ie))])])):B("",!0)}});var De=O(Se,[["__scopeId","data-v-35beb1d5"]]);const Ne={class:"lave flex flex-item-center flex-center flex-down"},Te=["textContent"],be={class:"flex"},ke=["textContent"],Be=["textContent"],ze=$({setup(o){const e=N(),t=I(()=>e.state.config.lave.laveTime);w(t,i=>i&&(l.value=i));const n=I(()=>e.state.config.lave.title||"\u6703\u8003\u5269\u9918"),l=m("2022-05-21T00:00:00+08:00"),c=m(),a=["\u5929","\u5C0F\u6642","\u5206\u9418","\u79D2"],u=()=>{let i=new Date(l.value).getTime()-new Date().getTime();c.value=[i/(1e3*60*60*24),i%(1e3*60*60*24)/(1e3*60*60),i%(1e3*60*60)/(1e3*60),i%(1e3*60)/1e3].map(d=>(~~d).toString().padStart(2,"0"));let r=c.value.map((d,v)=>[v,+d]).filter(([,d])=>d!==0)[0];document.title=`${n.value} ${r[1]||""}${a[r[0]]}`};u();const h=setInterval(u,100);return k(()=>clearInterval(h)),(i,r)=>(_(),p("div",Ne,[s("div",{class:"title",textContent:y(oe(n))},null,8,Te),s("div",be,[(_(),p(j,null,H(a,(d,v)=>{var V;return s("div",{class:"flex",key:v},[s("span",{class:"time",textContent:y((V=c.value)==null?void 0:V[v])},null,8,ke),s("span",{textContent:y(d)},null,8,Be)])}),64))])]))}});var Fe=O(ze,[["__scopeId","data-v-caab62ca"]]);const g=o=>(U("data-v-ea73a136"),o=o(),G(),o),Me={key:0,class:"config"},Oe={key:0,class:"content"},Ve={class:"input"},Ae=g(()=>s("label",{for:"setTitle"},"\u5012\u8A08\u6642\u6A19\u984C:",-1)),Le={class:"input"},Ee=g(()=>s("label",{for:"setDate"},"\u8A2D\u5B9A\u5230\u671F\u6642\u9593:",-1)),je={class:"lunchOptions"},He={class:"input"},Ue=g(()=>s("label",{for:"schoolName"},"\u8ACB\u8F38\u5165\u5B78\u6821\u540D:(\u53EF\u9078)",-1)),Ge={class:"input"},Pe=g(()=>s("label",{for:"schoolID"},"\u8ACB\u8F38\u5165\u5B78\u6821ID:(\u53EF\u9078)",-1)),qe=g(()=>s("div",null,null,-1)),Je=g(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#fff"},[s("path",{d:"M0 0h24v24H0V0z",fill:"none"}),s("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})],-1)),Ke=[Je],Re=$({setup(o){const e=N(),t=m(!1),n=m({lave:{},food:{}});w(n,()=>{e.dispatch("config/setConfig",C(f({},n),{$_updata:!0}))});const l=!!(chrome==null?void 0:chrome.storage);return(c,a)=>l?B("",!0):(_(),p("div",Me,[t.value?(_(),p("div",Oe,[s("div",Ve,[Ae,x(s("input",{type:"text",placeholder:"\u6703\u8003\u5269\u9918","onUpdate:modelValue":a[0]||(a[0]=u=>n.value.lave.title=u),id:"setTitle"},null,512),[[D,n.value.lave.title]])]),s("div",Le,[Ee,x(s("input",{type:"datetime-local","onUpdate:modelValue":a[1]||(a[1]=u=>n.value.lave.laveTime=u),id:"setDate"},null,512),[[D,n.value.lave.laveTime]])]),s("div",null,[s("div",je,[s("div",He,[Ue,x(s("input",{type:"text",placeholder:"\u8ACB\u8F38\u5165\u5B78\u6821\u540D","onUpdate:modelValue":a[2]||(a[2]=u=>n.value.food.schoolName=u),id:"schoolName"},null,512),[[D,n.value.food.schoolName]])]),s("div",Ge,[Pe,x(s("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=u=>n.value.food.schoolId=u),placeholder:"\u8ACB\u8F38\u5165\u5B78\u6821ID",id:"schoolID"},null,512),[[D,n.value.food.schoolId]])])])]),qe])):B("",!0),s("div",{class:"icon",onClick:a[4]||(a[4]=u=>t.value=!t.value)},Ke)]))}});var We=O(Re,[["__scopeId","data-v-ea73a136"]]);const Ye={class:"wrapper"},Qe=$({setup(o){const e=N();return E(()=>{if((chrome==null?void 0:chrome.storage)&&location.href.startsWith("chrome"))chrome.storage.onChanged.addListener(async({config:t})=>{t&&await e.dispatch("config/setConfig",C(f({},t.newValue),{$_updata:!1}))}),chrome.storage.local.get("config",({config:t})=>{t&&e.dispatch("config/setConfig",C(f({},t),{$_updata:!1}))});else{let t=new URL(location.href).searchParams;Object.keys(t).filter(n=>["endTitle","endTime","foodSchoolId","foodSchoolName"].includes(n))?e.dispatch("config/setConfig",{lave:{title:t.get("endTitle"),laveTime:t.get("endTime")},food:{schoolId:t.get("foodSchoolId"),schoolName:t.get("foodSchoolName")},$_updata:!1}):e.dispatch("config/setConfig",C(f({},JSON.parse(localStorage.getItem("config")||"{}")),{$_updata:!1}))}}),k(()=>{}),(t,n)=>(_(),p("div",Ye,[S(Fe),S(De),S(We)]))}});te(Qe).use(ue,P).mount("#app");
