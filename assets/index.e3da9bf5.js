var j=Object.defineProperty,E=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var L=(o,e,t)=>e in o?j(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,p=(o,e)=>{for(var t in e||(e={}))G.call(e,t)&&L(o,t,e[t]);if(M)for(var t of M(e))A.call(e,t)&&L(o,t,e[t]);return o},$=(o,e)=>E(o,H(e));import{a as S,c as P,u as q,d as w,b as x,r as m,w as C,o as D,e as f,f as h,g as y,h as K,T as U,i as a,j as O,k as R,v as W,F as V,l as B,t as g,p as Y,m as J,n as Q,q as X,s as Z,x as ee}from"./vendor.79bec657.js";const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=t(s);fetch(s.href,c)}};te();const oe={},se={},ce={lave:{},food:{}};var N;(function(o){o.setConfig="setConfig"})(N||(N={}));const ne={[N.setConfig]:async({state:o},e)=>{var t,l,s,c,r,v;if(e=Object.fromEntries(Object.entries(e).map(([u,n])=>[u,Object.fromEntries(Object.entries(n).map(([d,i])=>[d,i===null?void 0:i]))])),((t=e.food)==null?void 0:t.schoolName)!==((l=o.food)==null?void 0:l.schoolName)&&((s=e.food)==null?void 0:s.schoolName)||((c=e.food)==null?void 0:c.schoolId)!==((r=o.food)==null?void 0:r.schoolId)&&((v=e.food)==null?void 0:v.schoolId)){const{data:u}=await S({url:`https://fatraceschool.k12ea.gov.tw/school?SchoolName=${e.food.schoolName}`,method:"GET"});let{data:n}=u;e||(e={food:{},lave:{}}),console.log(n),n.length&&(e.$_updata=!0,e.food.schoolId=n[0].SchoolId.toString(),e.food.schoolName=n[0].SchoolName)}e.$_updata!==!1&&(chrome==null?void 0:chrome.storage)&&chrome.storage.local.set({config:e}),o.food=p(p({},o.food),e.food),o.lave=p(p({},o.lave),e.lave)}},ae={namespaced:!0,mutations:se,getters:oe,state:ce,actions:ne};var z;(function(o){o.CONFIG="config"})(z||(z={}));const le=P({modules:{[z.CONFIG]:ae}}),F=Symbol("vue-store"),k=()=>q(F);var b=(o,e)=>{const t=o.__vccOpts||o;for(const[l,s]of e)t[l]=s;return t};const I=o=>(Y("data-v-9bca79bc"),o=o(),J(),o),ie={key:0,class:"menu"},re={class:"content"},de={class:"cover"},ue=["src"],fe={class:"flex flex-down flex-item-center"},he=["textContent"],_e=["textContent"],ve={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#fff"},pe=I(()=>a("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"},null,-1)),me=I(()=>a("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5l2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4l1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"},null,-1)),ge=[pe,me],we={key:1,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#fff"},xe=I(()=>a("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1)),Ce=I(()=>a("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"},null,-1)),ye=[xe,Ce],Ie=w({setup(o){const e=k(),t=x(()=>e.state.config.food.schoolId),l=x(()=>e.state.config.food.open),s=m(),c=m(!1);C(t,()=>r()),C(l,()=>c.value=!!l.value),C(c,()=>e.state.config.food.open=c.value),D(()=>clearInterval(v));const r=async()=>{var i;let u=new Date;const{data:n}=await S({url:`https://fatraceschool.k12ea.gov.tw/offered/meal?SchoolId=${t.value}&period=${[u.getFullYear(),u.getMonth()+1,u.getDate()].join("-")}&KitchenId=all`,method:"GET"});let d=(i=n==null?void 0:n.data)==null?void 0:i[0];if(d){const{data:_}=await S({url:`https://fatraceschool.k12ea.gov.tw/dish?BatchDataId=${d.BatchDataId}`,method:"GET"});s.value=_==null?void 0:_.data}},v=setInterval(r,1e3*60*10);return r(),(u,n)=>s.value?(f(),h("div",ie,[y(U,{name:"content"},{default:K(()=>[R(a("div",re,[(f(!0),h(V,null,B(s.value,(d,i)=>(f(),h("div",{class:"dish",key:i},[a("div",de,[a("img",{src:`https://fatraceschool.k12ea.gov.tw/dish/pic/${d.DishId}`,alt:"\u83DC\u8272\u5716\u7247"},null,8,ue)]),a("div",fe,[a("span",{textContent:g(d.DishType)},null,8,he),a("span",{textContent:g(d.DishName)},null,8,_e)])]))),128))],512),[[W,c.value]])]),_:1}),a("div",{class:"type",onClick:n[0]||(n[0]=d=>c.value=!c.value)},[c.value?(f(),h("svg",ve,ge)):(f(),h("svg",we,ye))])])):O("",!0)}});var $e=b(Ie,[["__scopeId","data-v-9bca79bc"]]);const Se={class:"lave flex flex-item-center flex-center flex-down"},De=["textContent"],Ne={class:"flex"},ze=["textContent"],ke=["textContent"],be=w({setup(o){const e=k(),t=x(()=>e.state.config.lave.laveTime);C(t,n=>n&&(s.value=n));const l=x(()=>e.state.config.lave.title||"\u6703\u8003\u5269\u9918"),s=m("2022-05-21T00:00:00+08:00"),c=m(),r=["\u5929","\u5C0F\u6642","\u5206\u9418","\u79D2"],v=()=>{let n=new Date(s.value).getTime()-new Date().getTime();c.value=[n/(1e3*60*60*24),n%(1e3*60*60*24)/(1e3*60*60),n%(1e3*60*60)/(1e3*60),n%(1e3*60)/1e3].map(i=>(~~i).toString().padStart(2,"0"));let d=c.value.map((i,_)=>[_,+i]).filter(([,i])=>i!==0)[0];document.title=`${l.value} ${d[1]||""}${r[d[0]]}`};v();const u=setInterval(v,100);return D(()=>clearInterval(u)),(n,d)=>(f(),h("div",Se,[a("div",{class:"title",textContent:g(Q(l))},null,8,De),a("div",Ne,[(f(),h(V,null,B(r,(i,_)=>{var T;return a("div",{class:"flex",key:_},[a("span",{class:"time",textContent:g((T=c.value)==null?void 0:T[_])},null,8,ze),a("span",{textContent:g(i)},null,8,ke)])}),64))])]))}});var Te=b(be,[["__scopeId","data-v-caab62ca"]]);const Me={key:0,class:"config"},Le=X('<div class="icon" data-v-92579cfc><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#fff" data-v-92579cfc><path d="M0 0h24v24H0V0z" fill="none" data-v-92579cfc></path><path d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" data-v-92579cfc></path></svg></div><div class="content" data-v-92579cfc></div>',2),Oe=[Le],Ve=w({setup(o){const e=!!(chrome==null?void 0:chrome.storage);return m(!1),(t,l)=>e?O("",!0):(f(),h("div",Me,Oe))}});var Be=b(Ve,[["__scopeId","data-v-92579cfc"]]);const Fe={class:"wrapper"},je=w({setup(o){const e=k();return Z(()=>{if((chrome==null?void 0:chrome.storage)&&location.href.startsWith("chrome"))chrome.storage.onChanged.addListener(async({config:t})=>{t&&await e.dispatch("config/setConfig",$(p({},t.newValue),{$_updata:!1}))}),chrome.storage.local.get("config",({config:t})=>{t&&e.dispatch("config/setConfig",$(p({},t),{$_updata:!1}))});else{let t=new URL(location.href).searchParams;e.dispatch("config/setConfig",{lave:{title:t.get("endTitle"),laveTime:t.get("endTime")},food:{schoolId:t.get("foodSchoolId"),schoolName:t.get("foodSchoolName")},$_updata:!1})}}),D(()=>{}),(t,l)=>(f(),h("div",Fe,[y(Te),y($e),y(Be)]))}});ee(je).use(le,F).mount("#app");
